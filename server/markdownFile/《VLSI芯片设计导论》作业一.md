# 《VLSI芯片设计导论》作业一

| 学号     | 姓名   |
| -------- | ------ |
| 20337096 | 倪沈炅 |



## 基础知识

1. 请写出布尔函数$𝐹(𝑥, 𝑦, 𝑧) = 𝑥𝑦 +\overline 𝑧$ 的真值表。

|  x   |  y   |  z   |  F   |
| :--: | :--: | :--: | :--: |
|  0   |  0   |  0   |  1   |
|  0   |  0   |  1   |  0   |
|  0   |  1   |  0   |  1   |
|  0   |  1   |  1   |  0   |
|  1   |  0   |  0   |  1   |
|  1   |  0   |  1   |  0   |
|  1   |  1   |  0   |  1   |
|  1   |  1   |  1   |  1   |

2. 请结合以下真值表回答问题：

    ![image-20230529130935040](E:\学习\VLSI设计导论\img\image-20230529130935040.png)

a) 请写出能够表示布尔函数 𝐹(𝑥, 𝑦, 𝑧) 的表达式。

$𝐹(𝑥, 𝑦, 𝑧) = x\overline y z$

b) 请写出能够表示布尔函数 𝐺(𝑥, 𝑦, 𝑧) 的表达式。

$𝐺(𝑥, 𝑦, 𝑧)  = xy\overline z + \overline xy\overline z = y\overline z$

3. 请写出以下电路中，输出 *F* 的逻辑表达式：

![image-20230529131519852](E:\学习\VLSI设计导论\img\image-20230529131519852.png)

答：$F = \overline {x+y}\overline z$

## 一、集成电路简介

## 二、MOSFET工作原理

4. 请回答下列问题：

a) 请画出作为四端器件的 NMOS 和 PMOS 晶体管的电路符号，并在图中标注出这些端口。

![image-20230529191657126](E:\学习\VLSI设计导论\img\image-20230529191657126.png)

b) 请写出 MOSFET 的各工作模式以及对应的电压和电流关系。

答：MOSFET 可以工作在三种不同的模式下：截止区、线性区和饱和区。

* 截止区：当栅极与源极之间的电压低于 MOSFET 中的阈值电压时，MOSFET 处于截止区。此时，漏极电流非常小，可以近似为零。

* 线性区：当栅极与源极之间的电压超过阈值电压，但低于最大耐压电压时，MOSFET 处于线性区。在这种情况下，漏极电流与栅极与源极之间的电压成正比关系，可以用以下公式表示：

​		$I_D = k_{n}((V_{GS}- V_{th})V_{DS} - \frac{1}{2}V_{DS}^2)$

> 其中，$I_D$ 是漏极电流，$k_n$ 是 MOSFET 的电导系数，$V_{GS}$ 是栅极与源极之间的电压，$V_{th}$ 是 MOSFET 的阈值电压，$V_{DS}$ 是漏极与源极之间的电压。

* 饱和区：当栅极与源极之间的电压超过阈值电压，并且漏极与源极之间的电压也超过一定值时，MOSFET 处于饱和区。在这种情况下，漏极电流与漏极与源极之间的电压成正比关系，可以用以下公式表示：

​		$I_D = \frac{1}{2}k_n(V_{GS} - V_{th})^2$

> 其中，$I_D $是漏极电流，$k_n$ 是 MOSFET 的电导系数，$V_{GS}$ 是栅极与源极之间的电压，$V_{th}$ 是MOSFET 的阈值电压。

​		需要注意的是，当 MOSFET 工作在饱和区时，漏极电流已经达到了最大值，进一步增加漏极与源极之间的电压不会再增加漏极电流，因此 MOSFET 不能再放大信号。



c) 请解释速度饱和效应并简要分析其对晶体管工作的影响。

速度饱和效应是在半导体器件中，载流子在外加电压时，受到电场力的作用而定向移动，形成漂移电流，载流子的平均漂移速度𝒗与电场强度E成正比，比率就是载流子迁移率μ，即$𝒗＝uE$。载流子漂移速度不是无限大的，当外加电场足够大时，载流子漂移速度将达到散射极限速度$𝒗_{scl}$，将使得漂移电流达到饱和。、

速度饱和效应对晶体管的影响主要体现在以下两个方面：

1. 饱和漂移速度的限制：当晶体管中的电子达到饱和漂移速度时，电子的移动性能不能再随着电场的增加而继续提高。这会导致晶体管在工作时出现一些问题，例如漂移电流的增加会变慢，晶体管的频率响应会降低，以及输出信号的波形可能会失真等。
2. 空间电荷区扩散的影响：空间电荷区的宽度对晶体管的性能有重要的影响，因为它决定了晶体管的开关速度和输出电阻等特性。速度饱和效应会导致空间电荷区的宽度增加，从而影响晶体管的开关速度和输出电阻等性能。此外，速度饱和效应还会导致噪声增加和功率损耗增加等问题。

## 三、CMOS反相器VTC特性分析

5. 请画出一个反相器的 VTC 的大致形状，并在图中标注出不同的工作状态。

![image-20230529193009809](E:\学习\VLSI设计导论\img\image-20230529193009809.png)

5. 对于噪声容限（Noise Margin）：

​	a) 请解释噪声以及噪声容限的定义。

答：噪声是指电路或信号中不希望存在的随机干扰。这些干扰可能来自于各种源，例如电源、线缆、元器件、自然环境等，它们会对信号产生不确定性和失真，从而影响系统的可靠性和性能。噪声可以用各种方式描述，例如幅度、频谱、功率等。在模拟电路中，噪声通常被表示为一个随机变量，它的统计特性可以用均值和方差来描述。在数字电路中，噪声通常被表示为误码率（BER）或信噪比（SNR）等指标。

噪声容限是指在电路或系统中允许的最大噪声水平。在模拟电路中，噪声容限通常被表示为信噪比（SNR），它是信号功率与噪声功率比值的对数，单位为分贝（dB）。在数字电路中，噪声容限通常被表示为误码率（BER），它是传输过程中发生错误比例的度量。

​	b) 给定一个反相器的 VTC 图，如何得到其噪声容限？请举例说明。

![image-20230529195120374](E:\学习\VLSI设计导论\img\image-20230529195120374.png)

## 四、CMOS反相器延时与功率分析

7. 对于静态 CMOS 反相器：

​	a) 请画出一个标准反相器的内部构造图，并标注出晶体管的尺寸比例。

![image-20230529200829328](E:\学习\VLSI设计导论\img\image-20230529200829328.png)

​	b) 请分析反相器的尺寸变化对电阻，电容以及延时的影响。

* 对电阻的影响：反相器的尺寸变化会影响 MOSFET 的电阻值，从而影响反相器的输入和输出电阻。当 MOSFET 的尺寸增大时，其沟道宽度增加，电阻值降低；反之，当 MOSFET 的尺寸减小时，其电阻值增加。因此，反相器的尺寸变化会直接影响输入和输出电阻，并进一步影响电路的带载能力和噪声特性。

* 对电容的影响：反相器的尺寸变化还会影响 MOSFET 的电容值，从而影响反相器的输入和输出电容。当MOSFET 的尺寸增大时，其栅极和沟道的面积增加，电容值增加；反之，当 MOSFET 的尺寸减小时，其电容值降低。因此，反相器的尺寸变化会直接影响输入和输出电容，并进一步影响电路的频率响应和稳定性。

* 对延时的影响：反相器的尺寸变化还会影响反相器的延时特性。当 MOSFET 的尺寸增大时，其沟道宽度增加，电荷密度增加，导致载流子的移动速度增加，电荷注入和抽取的速度也相应增加，从而缩短了电路的传输延时；反之，当 MOSFET 的尺寸减小时，其延时特性会变差。因此，反相器的尺寸变化会直接影响电路的传输延时，并进一步影响电路的速度和功耗。

## 五、静态CMOS逻辑门设计与优化

8. 请根据下述逻辑表达式回答问题：

$$
Out = \overline {D+A(B+C)}
$$

​	a) 请设计完成能实现该逻辑功能的静态 CMOS 逻辑门。

根据德摩根定律：
$$
\begin {align}
Out = &\overline {D+A(B+C)}\\
= &\overline D~~\overline{A(B+C)}\\
=& \overline D(\overline A+\overline{B+C})\\
=&\overline D(\overline A+\overline B~\overline C)
\end {align}
$$
所以为

![image-20230531024902119](E:\学习\VLSI设计导论\img\image-20230531024902119.png)

​	b) 请写出逻辑门延时的计算方法（不包括中间电容）。
$$
t_{pLH} = 0.69R_{max_{pLH}}(C_{par,0}+C_L)\\
t_{pHL} = 0.69R_{max_{pHL}}(C_{par,0}+C_L)\\
t_p =max(t_{pLH},t_{pHL})\\
$$


​	c) 设负载电容为 $C_L$，标准反相器的输入电容和寄生电容分别为 $C_{g,0}$ 和$C_{par,0}$，请计算 a) 中得到的逻辑门的传播延时。

![image-20230531112410990](E:\学习\VLSI设计导论\img\image-20230531112410990.png)

$C_{par,0} = (4+2+1)C_{g,0} = 7C_{g,0}$

PUN部分：

* $A=1\rightarrow0,C=B=1,D=1\rightarrow0,R = R_0$,

    即$R_{max_{pLH}} = R_0$

    $t_{pHL} = 0.69R_{0}(7C_{g,0}+C_L)$

PDN部分：

* $D=1\rightarrow0,C=B=A = 0,R = R_0$,

    即$R_{max_{pHL}} = R_0$

    $t_{pHL} = 0.69R_{0}(7C_{g,0}+C_L)$

所以：

$t_{p} = 0.69R_{0}(7C_{g,0}+C_L)$

9. 对于一个 2 输入的异或（XOR）门，请回答下列问题：

​	a) 请写出它的真值表，并使用 **SOP (Sum Of Product)** 的方法写出它的逻辑表达式。

|  A   |  B   |  C   |
| :--: | :--: | :--: |
|  0   |  0   |  0   |
|  0   |  1   |  1   |
|  1   |  0   |  1   |
|  1   |  1   |  0   |

$$
F = A\overline B + \overline AB
$$



​	b) 设负载电容为 $C_L$，标准反相器的输入电容和寄生电容分别为 $C_{g,0}$ 和$C_{par,0}$，请计算它的传播延时。

![image-20230531112339530](E:\学习\VLSI设计导论\img\image-20230531112339530.png)

$C_{par,0} = (4+4+2+2)C_{g,0} = 12C_{g,0}$

对于PUN,$R_{max} = R_0$,$t_{pHL} = 0.69R_{0}(12C_{g,0}+C_L)$

对于PDN,$R_{max} = R_0$,$t_{pLH} = 0.69R_{0}(12C_{g,0}+C_L)$

$t_{p} = 0.69R_{0}(12C_{g,0}+C_L)$

​	c) 对于该门的两个输入 **A** 与 **B**，假设 $P_{A=1}=1/3$，$P_{B=1}=1/2$，请计算该门的切换功耗。

真子表如下：

|  A   |  B   |  F   |
| :--: | :--: | :--: |
|  0   |  0   |  0   |
|  0   |  1   |  1   |
|  1   |  0   |  1   |
|  1   |  1   |  0   |

$$
\begin {align}
&P_{F = 0} = P_{A=0}P_{B=0}+P_{A=1}P_{B=1} = \frac {2}{3}\times\frac {1}{2} + \frac {1}{3}\times\frac {1}{2} = \frac {1}{2}\\
&P_{F = 1} = 1-P_{F = 0}= \frac {1}{2}\\
&\alpha_{0\rightarrow1} = P_{F = 0}P_{F = 1} = \frac{1}{4}
\end {align}
$$



10. 请根据下列逻辑表达式回答问题：

$$
𝑂𝑢𝑡 = (𝐴𝐵 + 𝐶)𝐷
$$

a) 请设计完成能实现该逻辑功能的静态 CMOS 逻辑门。

![image-20230531031002890](E:\学习\VLSI设计导论\img\image-20230531031002890.png)

b) 请使用与 a)不同的方案实现同样具有逻辑功能的静态 CMOS 逻辑门。

![image-20230531031212083](E:\学习\VLSI设计导论\img\image-20230531031212083.png)

11. 下图是一个 2 输入的同或（XNOR）门的符号表示，请回答下列问题：

    ![image-20230530223425755](E:\学习\VLSI设计导论\img\image-20230530223425755.png)

a) 请写出它的真值表以及逻辑表达式。

|  A   |  B   |  F   |
| :--: | :--: | :--: |
|  0   |  0   |  1   |
|  0   |  1   |  0   |
|  1   |  0   |  0   |
|  1   |  1   |  1   |

$$
F = AB + \overline A~\overline B
$$



b) 请使用静态 CMOS 电路实现该逻辑门。

![image-20230531030709071](E:\学习\VLSI设计导论\img\image-20230531030709071.png)

12. 对于多输入的异或（XOR）门该如何工作，向来众说纷纭。有人将其称为“奇数功能或门”，即当奇数个输入为高电平时，其输出为高电平。请回答

下列问题：

a) 请写出使用以上定义实现的 3 输入 XOR 门的真值表并设计出能实现其逻辑功能的静态 CMOS 电路。

|  A   |  B   |  C   | Out  |
| :--: | :--: | :--: | :--: |
|  0   |  0   |  0   |  0   |
|  0   |  0   |  1   |  1   |
|  0   |  1   |  0   |  1   |
|  0   |  1   |  1   |  0   |
|  1   |  0   |  0   |  1   |
|  1   |  0   |  1   |  0   |
|  1   |  1   |  0   |  0   |
|  1   |  1   |  1   |  1   |

$$
Out = \overline A~\overline BC+\overline AB\overline C + A\overline B~\overline C+ABC
$$

![image-20230531031642163](E:\学习\VLSI设计导论\img\image-20230531031642163.png)

b) 你认同这种定义吗？你认为多输入的 XOR 门应该实现什么样的逻辑功能？

认同，但是根据具体的应用场景和需求，可能存在其他定义的多输入XOR门。这取决于对XOR门的扩展和定制。例如，可以设计一种多输入的XOR门，其输出仅在输入中的高电平个数大于或等于某个阈值时为高电平，否则为低电平。这样的定义是可能的，但不是XOR门的标准定义。

13. （数字逻辑相关）请回答下列问题：

a) 什么是逻辑运算的最小完全集？

在逻辑运算中，最小完全集是指一组逻辑运算符，通过它们的组合可以实现所有可能的逻辑功能。换句话说，如果我们拥有最小完全集中的运算符，我们就能够构建出任何其他的逻辑运算符。

b) {与，或，非}是一个最小完全集吗？{与非，或非}呢？

{与，或，非}是一个最小完全集，{与非，或非}是一个最小完全集。

c) 请使用 NAND 门与 NOR 门实现 AND，OR 与 INV 门，再使用 AND，OR 与 INV 门实现 NAND 门与 NOR 门（2 输入）。

**使用 NAND 门与 NOR 门实现 AND，OR 与 INV 门**

![image-20230531020503146](E:\学习\VLSI设计导论\img\image-20230531020503146.png)



**使用 AND，OR 与 INV 门实现 NAND 门与 NOR 门**

![image-20230531020909426](E:\学习\VLSI设计导论\img\image-20230531020909426.png)

14. 请根据下述逻辑表达式回答问题：![image-20230530223820783](E:\学习\VLSI设计导论\img\image-20230530223820783.png)

a) 该表达式能否进一步化简？请写出化简后的表达式。

根据德摩根定律：
$$
\begin {align}
Out =& \overline {ABC + \overline AB + B\overline C+AC}\\
=&\overline{ABC}~\overline{\overline A B}~\overline{B\overline C}~\overline{AC}\\
=&(\overline A+\overline B+\overline C)(A+\overline B)(\overline B+C)(\overline A+\overline C)\\
=&(A\overline A+A\overline B+AC+\overline A~\overline B+\overline B~\overline B+\overline B~\overline C)(\overline B+C)(\overline A+\overline C)\\
=&(\overline B+AC+\overline B~\overline C)(\overline B+C)(\overline A+\overline C)\\
=&(\overline B+AC)(\overline A+\overline C)\\
=&\overline A~\overline B+\overline BC\\
\end {align} 
$$


b) 根据原表达式或者 a) 中得到的结果，实现对应的静态 CMOS 逻辑门。

![image-20230531031822594](E:\学习\VLSI设计导论\img\image-20230531031822594.png)

15. 请结合以下真值表回答问题：

    |  A   |  B   |  Y   |
    | :--: | :--: | :--: |
    |  0   |  0   |  0   |
    |  0   |  1   |  0   |
    |  1   |  0   |  1   |
    |  1   |  1   |  1   |

    a) 请根据真值表写出对应的逻辑表达式。
    $$
    Y = \overline A B+AB=B
    $$
    

    b) 请根据逻辑表达式实现对应的静态 CMOS 电路。

    ![image-20230531032106180](E:\学习\VLSI设计导论\img\image-20230531032106180.png)

16. 对于一个 4 输入的 NAND 门：

a) 请写出其逻辑表达式。

一个4输入的NAND门是一种具有四个输入端和一个输出端的逻辑门。NAND是指仅当所有输入都为高电平时，输出为低电平，否则输出为高电平。
$$
Out = \overline{ABCD}
$$


b) 使用互补 CMOS 设计将其实现，需要多少个 NMOS 晶体管？

需要四个NMOS 晶体管

![image-20230531032226148](E:\学习\VLSI设计导论\img\image-20230531032226148.png)

17. 请解释静态 CMOS 电路中为什么使用 PMOS 晶体管实现 PUN 部分，使用NMOS 实现 PDN 部分？若是互相替换会导致什么后果？

    * PMOS实现PUN部分：PMOS晶体管在静态CMOS电路中用于实现PUN部分。PMOS晶体管具有以下特点：

        - 当栅极电压低于源极电压时，PMOS晶体管导通；

        - 当栅极电压高于源极电压时，PMOS晶体管截止；

        - PMOS晶体管的特性使其适合用于实现与逻辑，因为当所有输入为高电平时，PMOS晶体管处于截止状态，输出为高电平。

    * NMOS实现PDN部分：NMOS晶体管在静态CMOS电路中用于实现PDN部分。NMOS晶体管具有以下特点：

        * 当栅极电压高于源极电压时，NMOS晶体管导通；
        * 当栅极电压低于源极电压时，NMOS晶体管截止；
        * NMOS晶体管的特性使其适合用于实现或逻辑，因为当至少一个输入为高电平时，NMOS晶体管导通，输出为高电平。

    如果在静态CMOS电路中互换PMOS和NMOS晶体管的使用，会导致以下后果：

    * 逻辑功能错误：PMOS和NMOS晶体管的导通和截止特性不同，互换使用会导致逻辑功能错误。例如，将NMOS用于PUN部分，会导致输入为高电平时输出为低电平，逻辑功能与预期不符。

    * 功耗增加：静态CMOS电路中，当输入为高电平时，理想情况下PUN或PDN中的晶体管应该是截止状态，不消耗功耗。如果互换PMOS和NMOS晶体管的使用，会导致输入为高电平时，晶体管始终导通，导致额外功耗的产生。

    * 器件失效：PMOS和NMOS晶体管的尺寸和工作电压通常不同。互换使用可能导致电压不匹配和过电流等问题，导致器件失效或寿命缩短。

18. 请结合下图回答问题：

![image-20230530233107633](E:\学习\VLSI设计导论\img\image-20230530233107633.png)

a) 图中的电路实现了什么样的逻辑功能？请写出其逻辑表达式。

电路等价于下图

![image-20230531001619862](E:\学习\VLSI设计导论\img\image-20230531001619862.png)

逻辑表达式为
$$
F = (\overline A+\overline B)\overline C + \overline A~\overline B + \overline{(A+B)C} + \overline {AB}
$$


b) 这是一个静态 CMOS 电路吗？为什么？

不是，PUN与PDN不对称。

19. 请结合下图回答问题：

![image-20230530233123552](E:\学习\VLSI设计导论\img\image-20230530233123552.png)

a) 该图中的 CMOS 电路实现了什么样的逻辑功能？请写出其逻辑表达式。

逻辑功能：实现了一个三输入的与非门
$$
Out = \overline A_1+\overline A_2+\overline A_3 + \overline{A_1A_2A_3} = \overline A_1+\overline A_2+\overline A_3
$$


b) 假设该电路之前的状态为：$A_1=0$，$A_2=1$，$A_3=1$，请写出稳定时电路中几个电容的充放电状态。这时候如果 $A_1$ 的状态由 0 变为 1，电容中的电荷会发生什么样的变化？

$C_L$充电，$C_2$充电，$C_1$充电；

如果 $A_1$ 的状态由 0 变为 1，$C_1$，$C_2$放电，

c) 结合 b) 中的情况，如果输入中只有 $A_1$ 会频繁地发生变化，该电路的设计可能会导致什么问题？能否进行优化？

问题：$C_1,C_2$在充电放电来回变换

优化：PDN改为如下

![image-20230531121846630](E:\学习\VLSI设计导论\img\image-20230531121846630.png)
